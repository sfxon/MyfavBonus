(function(){var e={915:function(){Shopware.Module.register("myfav-bonus-setup",{type:"plugin",name:"MyfavBonusSetup",title:"myfav-bonus-setup.page-bonus-setup.title",description:"myfav-bonus-setup.page-bonus-setup.title",color:"#F05A29",icon:"",routes:{index:{component:"myfav-bonus-setup-index",path:"index"},create:{component:"myfav-bonus-setup-detail",path:"create",meta:{parentPath:"myfav.bonus.setup.index"}}},settingsItem:[{group:"plugins",to:"myfav.bonus.setup.index",icon:"regular-cog",name:"myfav-bonus-setup",label:"myfav-bonus-setup.page-bonus-setup.menuTitle"}]})}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.p="bundles/myfavbonus/",window?.__sw__?.assetPath&&(n.p=window.__sw__.assetPath+"/bundles/myfavbonus/"),function(){"use strict";let{Component:e,Mixin:t}=Shopware,{Criteria:r}=Shopware.Data;e.register("myfav-bonus-setup-index",{template:'<sw-page class="myfavBonusSetup__index">\r\n    <template #smart-bar-header>\r\n        <h2>\r\n            {{ $tc(\'myfav-bonus-setup.page-bonus-setup.title\') }}\r\n        </h2>\r\n    </template>\r\n\r\n    <template #smart-bar-actions>\r\n        \r\n        <sw-button\r\n            :router-link="{ name: \'myfav.bonus.setup.create\' }"\r\n            class="myfav-bonus-setup-index__add-bonus"\r\n            variant="primary"\r\n        >\r\n            {{ $tc(\'myfav-bonus-setup.page-bonus-setup.buttonAddBonus\') }}\r\n        </sw-button>\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-entity-listing\r\n            class="myfav-bonus-setup-list__grid"\r\n\r\n            :is-loading="isLoading"\r\n            :columns="myfavBonusColumns"\r\n            :repository="myfavBonusRepository"\r\n            :items="myfavBonis"\r\n            :criteria-limit="limit"\r\n            :sort-by="currentSortBy"\r\n            :sort-direction="sortDirection"\r\n            :disable-data-fetching="true"\r\n            identifier="myfav-bonus-setup-list"\r\n            @update-records="updateTotal"\r\n            @page-change="onPageChange"\r\n            @column-sort="onSortColumn"\r\n        ></sw-entity-listing>\r\n    </template>\r\n</sw-page>',inject:["repositoryFactory","acl"],mixins:[t.getByName("listing")],data(){return{myfavBonis:null,isLoading:!0,sortBy:"title",sortDirection:"ASC",total:0,searchConfigEntity:"myfav_bonus"}},metaInfo(){return{title:this.$createTitle()}},computed:{myfavBonusRepository(){return this.repositoryFactory.create("myfav_bonus")},myfavBonusColumns(){return[{property:"title",dataIndex:"title",allowResize:!0,routerLink:"",label:"myfav-bonus-setup.page-bonus-setup.columnTitle",primary:!0},{property:"subtitle",dataIndex:"subtitle",allowResize:!0,routerLink:"",label:"myfav-bonus-setup.page-bonus-setup.columnSubtitle",primary:!0},{property:"fromCartPrice",dataIndex:"fromCartPrice",allowResize:!0,routerLink:"",label:"myfav-bonus-setup.page-bonus-setup.columnFromCartPrice",primary:!0}]},myfavBonusCriteria(){let e=new r(this.page,this.limit);return e.addSorting(r.sort(this.sortBy,this.sortDirection,this.naturalSorting)),e}},methods:{async getList(){this.isLoading=!0,console.log("get list");let e=await this.addQueryScores(this.term,this.myfavBonusCriteria);return this.entitySearchable?(this.freshSearchTerm&&e.resetSorting(),this.myfavBonusRepository.search(e).then(e=>{console.log("search result: ",e),this.myfavBonis=e,this.total=e.total,this.isLoading=!1})):(this.isLoading=!1,this.total=0,!1)},updateTotal({total:e}){this.total=e}}});let{Component:a,Mixin:s}=Shopware,{Criteria:o}=Shopware.Data,{mapPropertyErrors:i}=Shopware.Component.getComponentHelper();a.register("myfav-bonus-setup-detail",{template:'\r\n{% block myfav_bonus_setup_detail %}\r\n<sw-page class="myfav-bonus-setup-detail">\r\n\r\n    <template #smart-bar-header>\r\n        <h2>{{ placeholder(myfavBonus, \'name\', $tc(\'myfav-bonus-setup.page-detail.title\')) }}</h2>\r\n    </template>\r\n\r\n     <template #smart-bar-actions>\r\n        <sw-button\r\n            :disabled="myfavBonusIsLoading"\r\n            @click="onCancel"\r\n        >\r\n            {{ $tc(\'myfav-bonus-setup.page-detail.buttonCancel\') }}\r\n        </sw-button>\r\n\r\n        <sw-button-process\r\n            v-model="isSaveSuccessful"\r\n            class="myfav-bonus-setup-detail__save-action"\r\n            :is-loading="isLoading"\r\n            variant="primary"\r\n            @click.prevent="onSave"\r\n        >\r\n            {{ $tc(\'myfav-bonus-setup.page-detail.buttonSave\') }}\r\n        </sw-button-process>\r\n\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-card-view>\r\n            <template v-if="myfavBonusIsLoading">\r\n                <sw-skeleton variant="detail-bold" />\r\n                <sw-skeleton />\r\n            </template>\r\n\r\n            <template v-else>\r\n\r\n                <sw-card\r\n                    position-identifier="myfav-bonus-setup-detail-basic-info"\r\n                    :title="$tc(\'myfav-bonus-setup.page-detail.cardTitle\')"\r\n                >\r\n                    <sw-container\r\n                        class="myfav-bonus-setup-detail__container"\r\n                        columns="repeat(auto-fit, minmax(250px, 1fr))"\r\n                        gap="0 30px"\r\n                    >\r\n                        <div class="myfav-bonus-setup-detail__base-info-wrapper">\r\n                            <sw-text-field\r\n                                v-model:value="myfavBonus.title"\r\n                                type="text"\r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelTitle\')"\r\n                                name="title"\r\n                                validation="required"\r\n                                required\r\n                                :error="myfavBonusTitleError"\r\n                            />\r\n\r\n                            <sw-text-field\r\n                                v-model:value="myfavBonus.subtitle"\r\n                                type="text"\r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelSubtitle\')"\r\n                                name="subtitle"\r\n                                :error="myfavBonusSubtitleError"\r\n                            />\r\n\r\n                            <sw-switch-field \r\n                                v-model:value="myfavBonus.active" \r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelActive\')"\r\n                                name="active"\r\n                                :error="myfavBonusActiveError"\r\n                            ></sw-switch-field>\r\n\r\n                            <sw-number-field\r\n                                v-model:value="myfavBonus.fromCartPrice"\r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelFromCartPrice\')"\r\n                                name="fromCartPrice"\r\n                                numberType="float"\r\n                                :step="null"\r\n                                :min="null"\r\n                                :max="null"\r\n                                :value="null"\r\n                                :digits="2"\r\n                                :fillDigits="false"\r\n                                :allowEmpty="false"\r\n                                :error="myfavBonusFromCartPriceError"\r\n                            ></sw-number-field>\r\n\r\n                            <sw-switch-field \r\n                                v-model:value="myfavBonus.autoActivation" \r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelAutoActivation\')"\r\n                                name="autoActivation"\r\n                                :error="myfavBonusAutoActivationError"\r\n                            ></sw-switch-field>\r\n\r\n                            <sw-entity-single-select\r\n                                v-model:value="myfavBonus.productId" \r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelProductSingleSelect\')"\r\n                                entity="product"\r\n                                :error="myfavBonusProductIdError"\r\n                            ></sw-entity-single-select>\r\n\r\n                            <sw-number-field\r\n                                v-model:value="myfavBonus.sortOrder"\r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelSortOrder\')"\r\n                                name="sortOrder"\r\n                                numberType="int"\r\n                                :step="null"\r\n                                :min="null"\r\n                                :max="null"\r\n                                :value="null"\r\n                                :digits="2"\r\n                                :fillDigits="false"\r\n                                :allowEmpty="false"\r\n                                :error="myfavBonusSortOrderError"\r\n                            ></sw-number-field>\r\n\r\n                            <sw-text-field\r\n                                v-model:value="myfavBonus.freebeeIconUrl"\r\n                                type="text"\r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelFreebeeIconUrl\')"\r\n                                name="freebeeIconUrl"\r\n                                :error="myfavBonusFreebeeIconUrlError"\r\n                            />\r\n\r\n                            <sw-text-field\r\n                                v-model:value="myfavBonus.freebeeImageUrl"\r\n                                type="text"\r\n                                :label="$tc(\'myfav-bonus-setup.page-detail.labelFreebeeImageUrl\')"\r\n                                name="freebeeImageUrl"\r\n                                :error="myfavBonusFreebeeImageUrlError"\r\n                            />\r\n                        </div>\r\n                    </sw-container>\r\n                </sw-card>\r\n            </template>\r\n        </sw-card-view>\r\n    </template>\r\n\r\n</sw-page>\r\n{% endblock %}\r\n',inject:["repositoryFactory"],mixins:[Shopware.Mixin.getByName("placeholder"),Shopware.Mixin.getByName("notification"),Shopware.Mixin.getByName("validation")],shortcuts:{"SYSTEMKEY+S":"onSave",ESCAPE:"onCancel"},props:{myfavBonusId:{type:String,required:!1,default:null}},data(){return{myfavBonus:null,isLoading:!1,isSaveSuccessful:!1}},metaInfo(){return{title:this.$createTitle(this.identifier)}},computed:{identifier(){return this.placeholder(this.myfavBonus,"name")},myfavBonusIsLoading(){return this.isLoading},myfavBonusRepository(){return this.repositoryFactory.create("myfav_bonus")},...i("myfavBonus",["name"])},watch:{myfavBonusId(){this.createdComponent()}},created(){this.createdComponent()},methods:{createdComponent(){if(Shopware.ExtensionAPI.publishData({id:"myfav-bonus-setup-detail__myfavBonus",path:"myfavBonus",scope:this}),this.myfavBonusId){this.loadEntityData();return}Shopware.State.commit("context/resetLanguageToDefault"),this.myfavBonus=this.myfavBonusRepository.create(),this.isLoading=!1},async loadEntityData(){this.isLoading=!0;let[e]=await Promise.allSettled([this.myfavBonusRepository.get(this.myfavBonusId)]);"fulfilled"===e.status&&(this.myfavBonus=e.value),"rejected"===e.status&&this.createNotificationError({message:this.$tc("global.notification.notificationLoadingDataErrorMessage")}),this.isLoading=!1},abortOnLanguageChange(){return this.myfavBonusResponse.hasChanges(this.myfavBonus)},saveOnLanguageChange(){return this.onSave()},onChangeLanguage(){this.loadEntityData()},onSave(){this.isLoading=!0,this.myfavBonusRepository.save(this.myfavBonus).then(()=>{if(this.isLoading=!1,this.isSaveSuccessful=!0,null===this.myfavBonusId){this.$router.push({name:"myfav.bonus.setup.index"});return}this.loadEntityData()}).catch(e=>{throw this.isLoading=!1,this.createNotificationError({message:this.$tc("global.notification.notificationSaveErrorMessageRequiredFieldsInvalid")}),e})},onCancel(){this.$router.push({name:"myfav.bonus.setup.index"})}}}),n(915)}()})();